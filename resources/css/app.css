@import "tailwindcss";

/* Tailwind v4 content sources (Blade + JS) */
@source "../views/**/*.blade.php";
@source "../js/**/*.js";

@layer base {
  body { @apply bg-zinc-50 text-zinc-900; }
  a { @apply text-zinc-900; }

  label { @apply text-sm font-extrabold text-zinc-700; }

  input,
  select,
  textarea {
    @apply w-full rounded-2xl border border-zinc-200 bg-white px-3 py-2 text-sm outline-none
      focus:ring-2 focus:ring-sky-200 focus:border-sky-300;
  }
}

@layer components {
  /* =========================
     Layout / Containers
  ========================== */
  .container-page { @apply mx-auto max-w-6xl px-4; }

  .page-head { @apply flex flex-col gap-2 md:flex-row md:items-end md:justify-between mb-4; }
  .page-title { @apply text-xl md:text-2xl font-black tracking-tight; }
  .page-subtitle { @apply text-sm text-zinc-600; }

  /* =========================
     Cards
  ========================== */
  .card { @apply bg-white border border-zinc-100 rounded-2xl shadow-sm; }
  .card-head { @apply px-4 py-3 border-b border-zinc-100 flex items-center justify-between gap-2; }
  .card-body { @apply p-4; }

  /* =========================
     Buttons
     (Tailwind v4: NO @apply a clases custom como "btn")
  ========================== */
  .btn,
  .btn-primary,
  .btn-outline,
  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-extrabold
      border border-transparent transition active:scale-[0.99];
  }

  .btn-sm { @apply px-3 py-1.5 text-xs rounded-xl; }

  .btn-primary { @apply bg-sky-600 text-white hover:bg-sky-700; }
  .btn-outline { @apply bg-white border-zinc-200 hover:bg-zinc-50; }
  .btn-ghost { @apply bg-transparent hover:bg-zinc-100; }

  /* Icon buttons (base) */
  .icon-btn,
  .btn-cart {
    @apply inline-flex items-center justify-center h-10 w-10 rounded-xl border border-zinc-200 bg-white hover:bg-zinc-50 transition;
  }

  /* btn-cart (tienda) */
  .btn-cart {
    @apply text-sky-700 hover:text-sky-800;
  }
  .btn-cart svg {
    width: 20px;
    height: 20px;
    display: block;
  }
  .btn-cart.is-disabled {
    @apply opacity-50 cursor-not-allowed hover:bg-white hover:text-sky-700;
  }

  /* =========================
     Badges
     (Tailwind v4: NO @apply a "badge")
  ========================== */
  .badge,
  .badge-zinc,
  .badge-sky,
  .badge-amber,
  .badge-emerald,
  .badge-rose,
  .badge-indigo {
    @apply inline-flex items-center rounded-full px-2.5 py-1 text-xs font-black border;
  }

  .badge-zinc { @apply bg-zinc-50 text-zinc-800 border-zinc-200; }
  .badge-sky { @apply bg-sky-50 text-sky-900 border-sky-200; }
  .badge-amber { @apply bg-amber-50 text-amber-900 border-amber-200; }
  .badge-emerald { @apply bg-emerald-50 text-emerald-900 border-emerald-200; }
  .badge-rose { @apply bg-rose-50 text-rose-900 border-rose-200; }
  .badge-indigo { @apply bg-indigo-50 text-indigo-900 border-indigo-200; }

  /* Badge stock (tienda) */
  .badge-stock {
    @apply inline-flex items-center rounded-full px-2.5 py-1 text-xs font-black border;
  }
  .badge-stock.is-in {
    @apply bg-emerald-50 text-emerald-900 border-emerald-200;
  }
  .badge-stock.is-out {
    @apply bg-rose-50 text-rose-900 border-rose-200;
  }

  /* =========================
     Alerts
     (Tailwind v4: NO @apply a "alert")
  ========================== */
  .alert,
  .alert-success,
  .alert-error {
    @apply rounded-2xl border px-4 py-3 text-sm font-semibold;
  }

  .alert-success { @apply bg-emerald-50 text-emerald-900 border-emerald-200; }
  .alert-error { @apply bg-rose-50 text-rose-900 border-rose-200; }

  /* =========================
     Tables
  ========================== */
  .table-wrap { @apply overflow-x-auto; }
  .table { @apply w-full text-sm; }
  .table thead { @apply bg-zinc-50 text-xs uppercase text-zinc-500; }
  .table th { @apply px-3 py-2 text-left font-black; }
  .table td { @apply px-3 py-2; }
  .table tbody { @apply divide-y divide-zinc-100; }

  /* =========================
     Navbar / Pills
  ========================== */
  .nav-link { @apply text-sm font-extrabold text-zinc-700 hover:text-zinc-900; }

  .nav-pill {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-xs font-black
      border border-zinc-200 bg-white hover:bg-zinc-50;
  }
  .nav-pill-active {
    @apply border-sky-300 bg-sky-50 text-sky-900;
  }

  /* =========================
     Dropdown
  ========================== */
  .dropdown { @apply relative; }
  .dropdown-menu { @apply absolute right-0 mt-2 w-48 rounded-2xl border border-zinc-200 bg-white shadow-lg p-2 hidden; }
  .dropdown.open .dropdown-menu { @apply block; }
  .dropdown-item { @apply block px-3 py-2 rounded-xl text-sm font-semibold hover:bg-zinc-100; }

  /* =========================
     TIENDA — Product Card UI (lo que faltaba)
  ========================== */
  .product-card {
    @apply flex flex-col overflow-hidden rounded-2xl border border-zinc-200 bg-white shadow-sm transition
      hover:shadow-md;
  }

  .product-image {
    @apply block w-full bg-zinc-50 overflow-hidden;
    /* una altura consistente sin depender de plugins */
    height: 210px;
  }
  /* =========================
   TIENDA — Destacados (compacto para carrusel)
   Pisa la card normal SOLO cuando tiene .product-card-featured
========================== */
  .product-card-featured .product-image{
    /* anula el height fijo de 210px SOLO en destacados */
    height: auto;
    aspect-ratio: 1 / 1;      /* ✅ cuadrado */
  }

  .product-card-featured .product-image img{
    width: 100%;
    height: 100%;
    object-fit: cover;        /* ✅ llena el cuadrado sin deformar */
    display: block;
  }

  .product-card-featured .product-body{
    padding: 10px;            /* menos padding */
    gap: 6px;                 /* menos separación */
  }

  .product-card-featured .product-title{
    font-size: 13px;          /* más chico */
    line-height: 1.2;
    display: -webkit-box;     /* clamp */
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;    /* máximo 2 líneas */
    overflow: hidden;
    margin: 0;
  }

  .product-card-featured .product-row{
    margin-top: 4px;          /* menos aire */
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
  }

  .product-card-featured .product-price{
    font-size: 15px;          /* más compacto que text-lg */
    font-weight: 800;
  }

  .product-card-featured .badge-stock{
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 9999px;
  }

  .product-card-featured .btn-cart{
    height: 34px;
    width: 34px;
    border-radius: 12px;
  }

  .product-card-featured .btn-cart svg{
    width: 18px;
    height: 18px;
  }

  .product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .product-image-placeholder {
    @apply h-full w-full flex items-center justify-center text-sm font-extrabold text-zinc-500 bg-zinc-100;
  }

  .product-body {
    @apply p-4 flex flex-col gap-2;
  }

  .product-title {
    @apply font-black text-zinc-900 leading-snug hover:underline;
  }

  .product-meta {
    @apply text-xs font-semibold text-zinc-500;
  }

  .product-row {
    @apply mt-2 flex items-center justify-between gap-2;
  }

  .product-price {
    @apply text-lg font-black text-zinc-900;
  }

  .product-actions {
    @apply flex items-center gap-2;
  }

  /* =========================
     Helpers / Legacy
  ========================== */
  .muted { @apply text-sm text-zinc-600; }

  .hero { @apply bg-white border border-zinc-100 rounded-2xl shadow-sm; }
  .hero-title { @apply text-xl md:text-2xl font-black tracking-tight; }
  .hero-text { @apply text-sm text-zinc-600; }

  .orders-list { @apply grid gap-3; }
  .order-card { @apply bg-white border border-zinc-100 rounded-2xl shadow-sm p-4; }

  /* =========================
     Scroll lock / Toast smooth
  ========================== */
  html { scrollbar-gutter: stable both-edges; }

  html.nr-scroll-lock,
  body.nr-scroll-lock { overflow: hidden; }

  body.nr-scroll-lock {
    padding-right: var(--nr-sbw, 0px);
    touch-action: none;
  }

  .nr-no-transition { transition: none !important; }

  /* =========================
   TIENDA — Destacados (card compacta para carrusel)
========================== */
.product-card-featured .product-image{
  /* pisa el height fijo de 210px SOLO en destacados */
  height: auto;
  aspect-ratio: 1 / 1; /* cuadrada: queda mucho más prolija en carrusel */
}

.product-card-featured .product-body{
  padding: 12px; /* más compacta */
  gap: 8px;
}

.product-card-featured .product-title{
  font-size: 14px;
  line-height: 1.2;
  /* clamp 2 líneas para que no despareje alturas */
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-height: calc(1.2em * 2);
}

.product-card-featured .product-price{
  font-size: 16px; /* baja un poco vs text-lg */
}

.product-card-featured .product-row{
  margin-top: auto;            /* empuja “precio/acciones” al fondo */
  display: flex;
  flex-direction: column;      /* evita apretujón horizontal */
  align-items: stretch;
  gap: 8px;
}

.product-card-featured .product-actions{
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between; /* badge a la izq, botón a la der */
}

.product-card-featured .btn-cart{
  height: 36px;
  width: 36px;
  border-radius: 12px;
}

.product-card-featured .btn-cart svg{
  width: 18px;
  height: 18px;
}

}
